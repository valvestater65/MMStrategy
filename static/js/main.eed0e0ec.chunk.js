(this.webpackJsonpstrategybuilder=this.webpackJsonpstrategybuilder||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(1),r=n.n(s),o=n(7),i=n.n(o),u=(n(14),n(15),n(2)),c=n(3),d=n(5),p=n(4),l=function e(t,n,a,s){Object(u.a)(this,e),this.TyreName=t,this.Laps=n,this.Weight=a,this.Fuel=s},h=function e(){var t=this;Object(u.a)(this,e),this.Stints=[],this.WeightFactor=1,this.strategyWeight=function(){var e=0;return t.Stints.forEach((function(t){e+=t.weight})),e*t.WeightFactor}},f=n(8),m=n.n(f),j=function(e){return Object(a.jsxs)("div",{className:m.a.CalculatedStints,children:[Object(a.jsxs)("p",{children:["Tyre: ",e.tyre]}),Object(a.jsxs)("p",{children:["Box Lap: ",e.laps]}),Object(a.jsxs)("p",{children:["Fuel: ",e.fuel]})]})},C=function(e){var t=e.strategy.Stints.map((function(e){return Object(a.jsx)(j,{tyre:e.TyreName,laps:e.Laps,fuel:e.Fuel},e.TyreName+"_"+e.Laps)}));return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Calculated Strategy: "}),t]})},v=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).definedCompounds=e.props.definedCompounds,e.raceStats=parseInt(e.props.raceStats),e.state={raceStrategies:[]},e.usedCompounds=[],e.currentStrategy=null,e}return Object(c.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.definedCompounds!==e.definedCompounds&&(this.definedCompounds=this.props.definedCompounds,this.raceStats=this.props.raceStats,this.calculateRaceStrategies())}},{key:"calculateRaceStrategies",value:function(){if(this.definedCompounds.length>0){var e=this.calculateStrategyStints(new h),t=this.state.raceStrategies;t.push(e),this.setState({raceStrategies:t})}}},{key:"calculateStrategyStints",value:function(e){for(var t=0;t<this.raceStats.raceLaps;){var n=parseInt(this.raceStats.raceLaps)-t,a=Math.ceil(n/this.raceStats.fuelLaps),s=(n/a).toFixed(2);console.log("remainingLaps: "+n),console.log("remainingStints: "+a),console.log("optimalStintLaps: "+s);var r=this.findOptimalCompound(s,this.raceStats.fuelLaps);r?(console.log("compound determined: "+r.tyreType.name),e.Stints.push(new l(r.tyreType.name,t,r.speedFactor,10)),t+=r.minLaps>this.raceStats.fuelLaps?this.raceStats.fuelLaps:r.minLaps,this.updateCompoundUsage(r),console.log("used compounds"),console.log(this.usedCompounds)):t=this.raceStats.raceLaps}return e}},{key:"findOptimalCompound",value:function(e,t){var n=this,a=[],s=e>t?t:e;return console.log("compoundMinLaps:"+s),this.definedCompounds.forEach((function(e){n.canCompoundBeUsed(e)&&e.minLaps>=s&&a.push(e)})),0===a.length&&this.definedCompounds.forEach((function(e){n.canCompoundBeUsed(e)&&a.push(e)})),a.sort((function(e,t){return e.tyreType.speedFactor-t.tyreType.speedFactor}))[0]}},{key:"compoundsAvailable",value:function(){var e=this;return this.definedCompounds.some((function(t){return e.canCompoundBeUsed(t)}))}},{key:"updateCompoundUsage",value:function(e){if(0===this.usedCompounds.length)this.usedCompounds.push({compoundId:e.id,used:1});else{var t=this.usedCompounds.find((function(t){return parseInt(t.compoundId)===parseInt(e.id)}));t?(t.used+=1,this.usedCompounds.slice(this.usedCompounds.findIndex((function(t){return parseInt(t.compoundId)===parseInt(e.id)})),1,t)):this.usedCompounds.push({compoundId:e.id,used:1})}}},{key:"canCompoundBeUsed",value:function(e){if(0===this.usedCompounds.length)return!0;var t=this.usedCompounds.find((function(t){return parseInt(t.compoundId)===parseInt(e.id)}));return!t||t.used<e.available}},{key:"renderCalculatedStints",value:function(){return this.state.raceStrategies.length>0?this.state.raceStrategies.map((function(e){return Object(a.jsx)(C,{strategy:e},Date.now)})):Object(a.jsx)("p",{children:"provide data"})}},{key:"render",value:function(){return this.renderCalculatedStints()}}]),n}(s.Component),b=function e(t,n){Object(u.a)(this,e),this.name=t,this.speedFactor=n},S=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var s;return Object(u.a)(this,n),(s=t.call(this,e)).tyreNames=["Ultra-Soft","Super-Soft","Soft","Medium","Hard","Inter","Full-Wet"],s.state={tyreTypes:[],setCompound:{id:s.props.id,tyreType:"",maxLaps:0,minLaps:0,available:0},isSet:!1},s.initializeTyreTypes=function(){for(var e=[],t=0;t<s.tyreNames.length;t++)e.push(new b(s.tyreNames[t],t));return e},s.getTyreOptions=function(){return s.state.tyreTypes.map((function(e){return Object(a.jsx)("option",{value:e.name,children:e.name},e.name)}))},s.setMaxLapsHandler=function(e){e.preventDefault();var t=s.state.setCompound;t.maxLaps=parseInt(e.target.value),s.setState({setCompound:t}),s.setState({isSet:!0})},s.setMinLapsHandler=function(e){e.preventDefault();var t=s.state.setCompound;t.minLaps=parseInt(e.target.value),s.setState({setCompound:t}),s.setState({isSet:!0})},s.setTyreTypeHandler=function(e){e.preventDefault();var t=s.state.setCompound;t.tyreType=s.state.tyreTypes.find((function(t){return t.name===e.target.value})),s.setState({setCompound:t}),s.setState({isSet:!0})},s.setAvailableCompoundsHandler=function(e){e.preventDefault();var t=s.state.setCompound;t.available=parseInt(e.target.value),s.setState({setCompound:t}),s.setState({isSet:!0})},s.state.tyreTypes=s.initializeTyreTypes(),s}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{children:[Object(a.jsx)("select",{name:"compounds",onChange:function(t){return e.setTyreTypeHandler(t)},children:this.getTyreOptions()}),Object(a.jsx)("label",{children:"Max Laps:"}),Object(a.jsx)("input",{type:"text",placeholder:"MaxLaps",onChange:function(t){return e.setMaxLapsHandler(t)}}),Object(a.jsx)("label",{children:"Min Laps:"}),Object(a.jsx)("input",{type:"text",placeholder:"MinLaps",onChange:function(t){return e.setMinLapsHandler(t)}}),Object(a.jsx)("label",{children:"Available:"}),Object(a.jsx)("input",{type:"text",placeholder:"Available",onChange:function(t){return e.setAvailableCompoundsHandler(t)}}),this.state.isSet?Object(a.jsx)("button",{onClick:function(){e.setState({isSet:!1}),e.props.setCompound(e.state.setCompound)},children:"Set"}):Object(a.jsx)("button",{disabled:!0,children:"Set"}),Object(a.jsx)("button",{children:"Remove"})]})}}]),n}(s.Component),y=function(e){return Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{type:"text",placeholder:"Max Fuel Laps",onChange:function(t){return e.fuelLaps(t)}}),Object(a.jsx)("input",{type:"text",placeholder:"Race Laps",onChange:function(t){return e.raceLaps(t)}})]})},O=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(u.a)(this,n);for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={raceStats:{fuelLaps:0,raceLaps:0},definedCompounds:[]},e.fuelLapsHandler=function(t){t.preventDefault();var n=e.state.raceStats;n.fuelLaps=parseInt(t.target.value),e.setState({raceStats:n})},e.raceLapsHandler=function(t){t.preventDefault();var n=e.state.raceStats;n.raceLaps=parseInt(t.target.value),e.setState({raceStats:n})},e.addCompoundHandler=function(t){var n=e.state.definedCompounds,a=n.find((function(e){return e.id===t.id}));if(a){var s=n.indexOf(a);n.splice(s,1,t),e.setState({definedCompounds:n})}else console.log("element not found: "+t)},e.createCompoundHandler=function(){var t=e.state.definedCompounds;t.push({id:Date.now(),tyreType:"",maxLaps:0,minLaps:0}),e.setState({definedCompounds:t})},e.renderCompounds=function(){return e.state.definedCompounds.map((function(t){return Object(a.jsx)(S,{id:t.id,setCompound:e.addCompoundHandler},t.id)}))},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{children:[Object(a.jsx)(y,{fuelLaps:this.fuelLapsHandler,raceLaps:this.raceLapsHandler}),Object(a.jsx)("button",{onClick:this.createCompoundHandler,children:"Add Compound"}),this.renderCompounds(),Object(a.jsx)("button",{onClick:function(t){return e.props.calculateClick(t,e.state)},children:"Calculate"})]})}}]),n}(s.Component),g=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={raceStats:{},definedCompounds:[]},e.calculateClickHandler=function(t,n){t.preventDefault(),e.setState({raceStats:n.raceStats,definedCompounds:n.definedCompounds})},e}return Object(c.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Strategy Builder"}),Object(a.jsx)(O,{calculateClick:this.calculateClickHandler}),Object(a.jsx)(v,{raceStats:this.state.raceStats,definedCompounds:this.state.definedCompounds})]})}}]),n}(s.Component);var x=function(){return Object(a.jsx)(g,{})};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(x,{})}),document.getElementById("root"))},8:function(e,t,n){e.exports={CalculatedStints:"calculatedStints_CalculatedStints__2pRRF"}}},[[16,1,2]]]);
//# sourceMappingURL=main.eed0e0ec.chunk.js.map