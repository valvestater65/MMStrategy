(this.webpackJsonpstrategybuilder=this.webpackJsonpstrategybuilder||[]).push([[0],[,,,function(t,e,a){t.exports={CalculatedStints:"calculatedStints_CalculatedStints__2pRRF",Compound:"calculatedStints_Compound__3uBrb",Details:"calculatedStints_Details__3TSge",row:"calculatedStints_row__rfLct",warning:"calculatedStints_warning__HaADc",safe:"calculatedStints_safe__94Jst"}},,,,function(t,e,a){t.exports={Compound:"Compound_Compound___92da",formRow:"Compound_formRow__yDRrC"}},function(t,e,a){t.exports={RaceData:"raceData_RaceData__2LpJn",formRow:"raceData_formRow__1kpYl"}},,function(t,e,a){t.exports={CalculatedStrategy:"calculatedStrategies_CalculatedStrategy__37J7R",stintrow:"calculatedStrategies_stintrow__1zeTd"}},,function(t,e,a){t.exports={CompoundRow:"FormSetup_CompoundRow__1OeAi"}},function(t,e,a){t.exports={Layout:"Layout_Layout__9siPd"}},,,,,,function(t,e,a){},function(t,e,a){},function(t,e,a){"use strict";a.r(e);var n=a(0),s=a(1),r=a.n(s),i=a(11),c=a.n(i),o=(a(19),a(20),a(2)),u=a(4),d=a(6),l=a(5),p=function t(e,a,n,s,r,i){Object(o.a)(this,t),this.TyreName=e,this.BoxLap=a,this.Weight=n,this.Fuel=s,this.Compound=r,this.StintLength=i},h=function t(){var e=this;Object(o.a)(this,t),this.Stints=[],this.WeightFactor=1,this.strategyWeight=function(){var t=0;return e.Stints.forEach((function(e){t+=e.weight})),t*e.WeightFactor}},f=a(3),m=a.n(f),j=function(t){var e=[];return e.push(m.a.row),0===parseInt(t.stint.Compound.minLaps-t.stint.StintLength)?e.push(m.a.warning):e.push(m.a.safe),Object(n.jsxs)("div",{className:m.a.CalculatedStints,children:[Object(n.jsx)("div",{className:m.a.Compound,children:t.stint.TyreName}),Object(n.jsxs)("div",{className:m.a.Details,children:[Object(n.jsxs)("div",{className:m.a.row,children:[Object(n.jsx)("p",{children:"Box Lap:"}),Object(n.jsx)("span",{children:t.stint.BoxLap})]}),Object(n.jsxs)("div",{className:m.a.row,children:[Object(n.jsx)("p",{children:"Fuel: "}),Object(n.jsx)("span",{children:t.stint.Fuel})]}),Object(n.jsxs)("div",{className:e.join(" "),children:[Object(n.jsx)("p",{children:"Diff. Tyre Laps: "}),Object(n.jsx)("span",{children:t.stint.Compound.minLaps-t.stint.StintLength})]}),Object(n.jsxs)("div",{className:m.a.row,children:[Object(n.jsx)("p",{children:"Stint Laps:"}),Object(n.jsx)("span",{children:t.stint.StintLength})]})]})]})},S=a(10),b=a.n(S),C=function(t){var e=t.strategy.Stints.map((function(t,e){return Object(n.jsx)(j,{stint:t},e)}));return Object(n.jsxs)("div",{className:b.a.CalculatedStrategy,children:[Object(n.jsx)("h2",{children:"Calculated Strategy: "}),Object(n.jsx)("div",{className:b.a.stintrow,children:e})]})},v=function(t){Object(d.a)(a,t);var e=Object(l.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).definedCompounds=null,n.raceStats=parseInt(n.props.raceStats),n.usedCompounds=[],n.currentStrategy=null,n.raceStrategies=[],n.state={render:!1},n}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(){this.definedCompounds!==this.props.definedCompounds&&(this.raceStrategies=[],this.definedCompounds=this.props.definedCompounds,this.raceStats=this.props.raceStats,this.calculateRaceStrategies())}},{key:"calculateRaceStrategies",value:function(){if(this.definedCompounds.length>0){var t=this.calculateStrategyStints(new h);this.raceStrategies.push(t),this.setState({render:!0})}}},{key:"calculateStrategyStints",value:function(t){for(var e=0;e<this.raceStats.raceLaps;){var a=parseInt(this.raceStats.raceLaps)-e,n=(a/Math.ceil(a/this.raceStats.fuelLaps)).toFixed(2),s=this.findOptimalCompound(n,this.raceStats.fuelLaps);if(s){var r=this.getStintLaps(e,s),i=this.getStintFuel(t,r);t.Stints.push(new p(s.tyreType.name,e,s.speedFactor,i,s,r)),e+=s.minLaps>this.raceStats.fuelLaps?this.raceStats.fuelLaps:s.minLaps,this.updateCompoundUsage(s)}else e=this.raceStats.raceLaps}return t}},{key:"getStintLaps",value:function(t,e){return this.raceStats.raceLaps-t>e.minLaps?e.minLaps>this.raceStats.fuelLaps?this.raceStats.fuelLaps:e.minLaps:this.raceStats.raceLaps-t}},{key:"getStintFuel",value:function(t,e){if(0===t.Stints.length)return this.raceStats.fuelLaps;var a=t.Stints[t.Stints.length-1],n=e-(a.Fuel-a.StintLength)+this.raceStats.deltaFuel;return n>this.raceStats.fuelLaps?this.raceStats.fuelLaps:n}},{key:"findOptimalCompound",value:function(t,e){var a=this,n=[],s=t>e?e:t;return this.definedCompounds.forEach((function(t){a.canCompoundBeUsed(t)&&t.minLaps>=s&&n.push(t)})),0===n.length&&this.definedCompounds.forEach((function(t){a.canCompoundBeUsed(t)&&n.push(t)})),n.sort((function(t,e){return t.tyreType.speedFactor-e.tyreType.speedFactor}))[0]}},{key:"compoundsAvailable",value:function(){var t=this;return this.definedCompounds.some((function(e){return t.canCompoundBeUsed(e)}))}},{key:"updateCompoundUsage",value:function(t){if(0===this.usedCompounds.length)this.usedCompounds.push({compoundId:t.id,used:1});else{var e=this.usedCompounds.find((function(e){return parseInt(e.compoundId)===parseInt(t.id)}));e?(e.used+=1,this.usedCompounds.slice(this.usedCompounds.findIndex((function(e){return parseInt(e.compoundId)===parseInt(t.id)})),1,e)):this.usedCompounds.push({compoundId:t.id,used:1})}}},{key:"canCompoundBeUsed",value:function(t){if(0===this.usedCompounds.length)return!0;var e=this.usedCompounds.find((function(e){return parseInt(e.compoundId)===parseInt(t.id)}));return!e||e.used<t.available}},{key:"renderCalculatedStints",value:function(){return this.raceStrategies.length>0?this.raceStrategies.map((function(t,e){return Object(n.jsx)(C,{strategy:t},e)})):Object(n.jsx)("p",{children:"Provide data first."})}},{key:"render",value:function(){return this.renderCalculatedStints()}}]),a}(s.Component),x=function t(e,a){Object(o.a)(this,t),this.name=e,this.speedFactor=a},O=a(7),y=a.n(O),L=function(t){Object(d.a)(a,t);var e=Object(l.a)(a);function a(t){var s;return Object(o.a)(this,a),(s=e.call(this,t)).tyreNames=["Ultra-Soft","Super-Soft","Soft","Medium","Hard","Inter","Full-Wet"],s.state={tyreTypes:[],setCompound:{id:s.props.id,tyreType:"",maxLaps:0,minLaps:0,available:0},isSet:!1},s.initializeTyreTypes=function(){for(var t=[],e=0;e<s.tyreNames.length;e++)t.push(new x(s.tyreNames[e],e));return t},s.getTyreOptions=function(){return s.state.tyreTypes.map((function(t){return Object(n.jsx)("option",{value:t.name,children:t.name},t.name)}))},s.setMaxLapsHandler=function(t){t.preventDefault();var e=s.state.setCompound;e.maxLaps=parseInt(t.target.value),s.setState({setCompound:e}),s.setState({isSet:!0})},s.setMinLapsHandler=function(t){t.preventDefault();var e=s.state.setCompound;e.minLaps=parseInt(t.target.value),s.setState({setCompound:e}),s.setState({isSet:!0})},s.setTyreTypeHandler=function(t){t.preventDefault();var e=s.state.setCompound;e.tyreType=s.state.tyreTypes.find((function(e){return e.name===t.target.value})),s.setState({setCompound:e}),s.setState({isSet:!0})},s.setAvailableCompoundsHandler=function(t){t.preventDefault();var e=s.state.setCompound;e.available=parseInt(t.target.value),s.setState({setCompound:e}),s.setState({isSet:!0})},s.state.tyreTypes=s.initializeTyreTypes(),s}return Object(u.a)(a,[{key:"render",value:function(){var t=this;return Object(n.jsxs)("div",{className:y.a.Compound,children:[Object(n.jsx)("select",{name:"compounds",onChange:function(e){return t.setTyreTypeHandler(e)},children:this.getTyreOptions()}),Object(n.jsxs)("div",{className:y.a.formRow,children:[Object(n.jsx)("label",{children:"Max Laps:"}),Object(n.jsx)("input",{type:"text",placeholder:"MaxLaps",onChange:function(e){return t.setMaxLapsHandler(e)}})]}),Object(n.jsxs)("div",{className:y.a.formRow,children:[Object(n.jsx)("label",{children:"Min Laps:"}),Object(n.jsx)("input",{type:"text",placeholder:"MinLaps",onChange:function(e){return t.setMinLapsHandler(e)}})]}),Object(n.jsxs)("div",{className:y.a.formRow,children:[Object(n.jsx)("label",{children:"Available:"}),Object(n.jsx)("input",{type:"text",placeholder:"Available",onChange:function(e){return t.setAvailableCompoundsHandler(e)}})]}),this.state.isSet?Object(n.jsx)("button",{onClick:function(){t.setState({isSet:!1}),t.props.setCompound(t.state.setCompound)},children:"Set"}):Object(n.jsx)("button",{disabled:!0,children:"Set"}),Object(n.jsx)("button",{children:"Remove"})]})}}]),a}(s.Component),g=a(8),_=a.n(g),w=function(t){return Object(n.jsxs)("div",{className:_.a.RaceData,children:[Object(n.jsxs)("div",{className:_.a.formRow,children:[Object(n.jsx)("label",{children:"Max Fuel Laps:"}),Object(n.jsx)("input",{type:"text",placeholder:"Max Fuel Laps",onChange:function(e){return t.fuelLaps(e)}})]}),Object(n.jsxs)("div",{className:_.a.formRow,children:[Object(n.jsx)("label",{children:"Race Laps:"}),Object(n.jsx)("input",{type:"text",placeholder:"Race Laps",onChange:function(e){return t.raceLaps(e)}})]}),Object(n.jsxs)("div",{className:_.a.formRow,children:[Object(n.jsx)("label",{children:"Delta Fuel laps:"}),Object(n.jsx)("input",{type:"text",placeholder:"Delta Fuel Laps",onChange:function(e){return t.deltaFuel(e)}})]})]})},F=a(12),R=a.n(F),T=function(t){Object(d.a)(a,t);var e=Object(l.a)(a);function a(){var t;Object(o.a)(this,a);for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={raceStats:{fuelLaps:0,raceLaps:0,deltaFuel:0},definedCompounds:[]},t.fuelLapsHandler=function(e){e.preventDefault();var a=t.state.raceStats;a.fuelLaps=parseInt(e.target.value),t.setState({raceStats:a})},t.raceLapsHandler=function(e){e.preventDefault();var a=t.state.raceStats;a.raceLaps=parseInt(e.target.value),t.setState({raceStats:a})},t.deltaFuelHandler=function(e){e.preventDefault();var a=t.state.raceStats;a.deltaFuel=parseInt(e.target.value),t.setState({raceStats:a})},t.addCompoundHandler=function(e){var a=t.state.definedCompounds,n=a.find((function(t){return t.id===e.id}));if(n){var s=a.indexOf(n);a.splice(s,1,e),t.setState({definedCompounds:a})}else console.log("element not found: "+e)},t.createCompoundHandler=function(){var e=t.state.definedCompounds;e.push({id:Date.now(),tyreType:"",maxLaps:0,minLaps:0}),t.setState({definedCompounds:e})},t.renderCompounds=function(){return t.state.definedCompounds.map((function(e){return Object(n.jsx)(L,{id:e.id,setCompound:t.addCompoundHandler},e.id)}))},t}return Object(u.a)(a,[{key:"render",value:function(){var t=this;return Object(n.jsxs)("div",{children:[Object(n.jsx)(w,{fuelLaps:this.fuelLapsHandler,raceLaps:this.raceLapsHandler,deltaFuel:this.deltaFuelHandler}),Object(n.jsx)("button",{onClick:this.createCompoundHandler,children:"Add Compound"}),Object(n.jsx)("div",{className:R.a.CompoundRow,children:this.renderCompounds()}),Object(n.jsx)("button",{onClick:function(e){return t.props.calculateClick(e,t.state)},children:"Calculate"})]})}}]),a}(s.Component),k=a(13),N=a.n(k),D=function(t){Object(d.a)(a,t);var e=Object(l.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={raceStats:{},definedCompounds:[]},t.calculateClickHandler=function(e,a){e.preventDefault(),t.setState({raceStats:a.raceStats,definedCompounds:a.definedCompounds})},t}return Object(u.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:N.a.Layout,children:[Object(n.jsx)("h1",{children:"Strategy Builder"}),Object(n.jsx)(T,{calculateClick:this.calculateClickHandler}),Object(n.jsx)(v,{raceStats:this.state.raceStats,definedCompounds:this.state.definedCompounds})]})}}]),a}(s.Component);var I=function(){return Object(n.jsx)(D,{})};c.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(I,{})}),document.getElementById("root"))}],[[21,1,2]]]);
//# sourceMappingURL=main.a481e9c7.chunk.js.map